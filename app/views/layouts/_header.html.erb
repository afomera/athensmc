<header class="navbar navbar-default navbar-inverse navbar-static-top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#athensmc-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <%= link_to root_path, class: 'navbar-brand' do %>
        <%= image_tag('athensLogo.png', :width  => '171', :height => '30') %>
      <% end %>
    </div> <!-- ./navbar-header -->

    <nav id="athensmc-navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
          <!-- Servers Dropdown -->
          <li class="dropdown">
            <%= link_to raw(("<i class='fa fa-inverse fa-server'></i> &nbsp;") + "Servers" +(" <i class='fa fa-caret-down'></i>")), information_path, :class => "dropdown-toggle", :data => {:toggle=>"dropdown"}  %>
              <ul class="dropdown-menu">
                <li>
                  <%= link_to servers_rrr_path do %>
                    <%= fa_icon 'th-large fa-fw', text: 'Rockets Rifles Robots' %>
                  <% end %>
                </li>
                <li>
                  <%= link_to servers_snapshot_path do %>
                    <%= fa_icon 'camera-retro fa-fw', text: 'Snapshot Survival' %>
                  <% end %>
                </li>
              </ul>
            </li>
            <!-- End Servers Dropdown -->

            <li>
              <%= link_to forum_threads_path do %>
                <%= fa_icon 'weixin', text: 'Forums' %>
              <% end %>
            </li>
          <% if !user_signed_in? %>
            <% #If no user is signed in, display information path %>
            <li>
              <%= link_to information_path do %>
                <i class="fa fa-info-circle"></i> &nbsp; Support
              <% end %>
            </li>
          <% end %>

            <% if user_signed_in? %>

            <li>
              <% link_to root_path do %>
                <%= fa_icon 'envelope-o', text: 'Messages' %>
              <% end %>
            </li>

            <!-- Notifications -->
            <li class="dropdown" data-behavior="notifications" data-notifications='<%= render template: "notifications/index", formats: [:json] %>'>
              <a class="dropdown-toggle nav-link" type="button" data-behavior="notifications-count" id="notificationDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <%= fa_icon "bell" %>
              </a>
              <ul class="dropdown-menu" aria-labelledby="notificationDropdown" data-behavior="notifications-list">
                <!-- Notifications get inserted here -->
              </ul>
            </li>
            <!-- ./notifications -->

            <li class="dropdown"> <!-- Signed In Dropdown -->
              <%= link_to "#", :class => "dropdown-toggle", :data => {:toggle=>"dropdown"} do %>
                <%= image_tag(current_user.minecraft_avatar, width: '24px', height: '24px') %> <%= fa_icon "caret-down" %>
              <% end %>

              <ul class="dropdown-menu">
                <li>
                  <%= link_to user_path(current_user.username) do %>
                    <i class="fa fa-user fa-fw"></i> &nbsp; View Profile
                  <% end %>
                </li>
                <li>
                  <%= link_to subscribe_path do %>
                    <i class="fa fa-money fa-fw"></i> &nbsp; Subscribe
                  <% end %>
                </li>
                <li>
                  <%= link_to downloads_path do %>
                    <i class="fa fa-cloud-download fa-fw"></i> &nbsp; Map Downloads
                  <% end %>
                </li>
                
                <li class="divider"></li>
                <li>
                  <%= link_to "http://forums.athensmc.com" do %>
                    <i class="fa fa-weixin fa-fw"></i> &nbsp; Old Forums
                  <% end %>
                </li>
                <li>
                  <%= link_to information_path do %>
                    <i class="fa fa-info-circle fa-fw"></i> &nbsp; Rules & Information
                  <% end %>
                </li>

                <li class="divider"></li>
                <li>
                  <%= link_to edit_user_registration_path do %>
                    <i class="fa fa-cog fa-fw"></i> &nbsp; Edit Account Settings
                  <% end %>
                </li>
                <li>
                  <%= link_to destroy_user_session_path, method: :delete  do %>
                   <i class="fa fa-sign-out fa-fw"></i> &nbsp; Sign Out
                  <% end %>
                </li>

              </ul>
            </li> <!-- End User Signed In Dropdown -->

          <% else %>
            <li>
              <%= link_to new_user_session_path do %>
                <%= fa_icon 'sign-in', text: 'Sign In' %>
              <% end %>
            </li>
           <li>
              <%= link_to new_user_registration_path do %>
                <%= fa_icon 'user-plus', text: 'Sign Up' %>
              <% end %>
            </li>

          <% end %>

      </ul>
    </nav> <!-- navbar-collapse -->
  </div> <!-- ./container -->
</header>
